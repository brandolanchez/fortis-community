{"version":3,"sources":["../src/react/index.tsx"],"names":[],"mappings":";;;;AAyHO,SAAS,iBAAA,CAAkB,OAAA,GAAoC,EAAC,EAAG;AACtE,EAAA,MAAM,CAAC,OAAO,QAAQ,CAAA,GAAI,MAAM,QAAA,CAAS,OAAA,CAAQ,gBAAgB,EAAE,CAAA;AACnE,EAAA,MAAM,WAAA,GAAc,OAA4B,IAAI,CAAA;AAEpD,EAAA,MAAM,YAAA,GAAe,WAAA,CAAY,CAAC,QAAA,KAAqB;AACnD,IAAA,QAAA,CAAS,QAAQ,CAAA;AACjB,IAAA,OAAA,CAAQ,WAAW,QAAQ,CAAA;AAAA,EAC/B,CAAA,EAAG,CAAC,OAAA,CAAQ,QAAQ,CAAC,CAAA;AAErB,EAAA,MAAM,YAAA,GAAe,YAAY,MAAqB;AAClD,IAAA,IAAI,CAAC,YAAY,OAAA,EAAS,OAAO,EAAE,KAAA,EAAO,CAAA,EAAG,KAAK,CAAA,EAAE;AACpD,IAAA,OAAO,wBAAA,CAAyB,YAAY,OAAO,CAAA;AAAA,EACvD,CAAA,EAAG,EAAE,CAAA;AAEL,EAAA,MAAM,KAAA,GAAQ,WAAA,CAAY,CAAC,MAAA,KAAyB;AAChD,IAAA,IAAI,CAAC,YAAY,OAAA,EAAS;AAC1B,IAAA,eAAA,CAAgB,WAAA,CAAY,OAAA,EAAS,MAAA,EAAQ,YAAY,CAAA;AAAA,EAC7D,CAAA,EAAG,CAAC,YAAY,CAAC,CAAA;AAGjB,EAAA,MAAM,OAAA,GAAU,KAAA,CAAM,OAAA,CAAQ,OAAO;AAAA,IACjC,MAAM,MAAM,KAAA,CAAM,WAAW,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IACnD,QAAQ,MAAM,KAAA,CAAM,aAAa,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IACvD,WAAW,MAAM,KAAA,CAAM,gBAAgB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IAC7D,eAAe,MAAM,KAAA,CAAM,oBAAoB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IACrE,IAAA,EAAM,CAAC,GAAA,KAAiB,KAAA,CAAM,WAAW,KAAA,EAAO,YAAA,EAAa,EAAG,GAAG,CAAC,CAAA;AAAA,IACpE,KAAA,EAAO,CAAC,GAAA,EAAa,GAAA,KAAiB,KAAA,CAAM,WAAA,CAAY,KAAA,EAAO,YAAA,EAAa,EAAG,GAAA,EAAK,GAAG,CAAC,CAAA;AAAA,IACxF,SAAA,EAAW,CAAC,IAAA,KAAkB,KAAA,CAAM,gBAAgB,KAAA,EAAO,YAAA,EAAa,EAAG,IAAI,CAAC,CAAA;AAAA,IAChF,YAAY,MAAM,KAAA,CAAM,iBAAiB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IAC/D,YAAY,MAAM,KAAA,CAAM,iBAAiB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IAC/D,cAAc,MAAM,KAAA,CAAM,mBAAmB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IACnE,MAAA,EAAQ,CAAC,KAAA,KAAiC,KAAA,CAAM,aAAa,KAAA,EAAO,YAAA,EAAa,EAAG,KAAK,CAAC,CAAA;AAAA,IAC1F,KAAA,EAAO,CAAC,IAAA,EAAe,IAAA,KAAkB,KAAA,CAAM,WAAA,CAAY,KAAA,EAAO,YAAA,EAAa,EAAG,IAAA,EAAM,IAAI,CAAC,CAAA;AAAA,IAC7F,OAAA,EAAS,CAAC,KAAA,KAAmB,KAAA,CAAM,cAAc,KAAA,EAAO,YAAA,EAAa,EAAG,KAAK,CAAC,CAAA;AAAA,IAC9E,KAAA,EAAO,CAAC,KAAA,KAAkB,KAAA,CAAM,YAAY,KAAA,EAAO,YAAA,EAAa,EAAG,KAAK,CAAC,CAAA;AAAA,IACzE,GAAA,EAAK,CAAC,GAAA,KAAgB,KAAA,CAAM,UAAU,KAAA,EAAO,YAAA,EAAa,EAAG,GAAG,CAAC;AAAA,GACrE,CAAA,EAAI,CAAC,KAAA,EAAO,YAAA,EAAc,KAAK,CAAC,CAAA;AAGhC,EAAA,SAAA,CAAU,MAAM;AACZ,IAAA,MAAM,OAAA,GAAU,qBAAA;AAAA,MACZ,MAAM,KAAA;AAAA,MACN,YAAA;AAAA,MACA;AAAA,KACJ;AAEA,IAAA,MAAM,WAAW,WAAA,CAAY,OAAA;AAC7B,IAAA,IAAI,QAAA,EAAU;AACV,MAAA,QAAA,CAAS,gBAAA,CAAiB,WAAW,OAAwB,CAAA;AAC7D,MAAA,OAAO,MAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,EAAW,OAAwB,CAAA;AAAA,IACjF;AAAA,EACJ,CAAA,EAAG,CAAC,KAAA,EAAO,YAAA,EAAc,KAAK,CAAC,CAAA;AAE/B,EAAA,OAAO;AAAA,IACH,KAAA;AAAA,IACA,QAAA,EAAU,YAAA;AAAA,IACV,WAAA;AAAA,IACA,OAAA;AAAA,IACA;AAAA,GACJ;AACJ;AAUO,SAAS,gBAAA,CACZ,WAAA,EACA,KAAA,EACA,QAAA,EACF;AACE,EAAA,MAAM,YAAA,GAAe,YAAY,MAAqB;AAClD,IAAA,IAAI,CAAC,YAAY,OAAA,EAAS,OAAO,EAAE,KAAA,EAAO,CAAA,EAAG,KAAK,CAAA,EAAE;AACpD,IAAA,OAAO,wBAAA,CAAyB,YAAY,OAAO,CAAA;AAAA,EACvD,CAAA,EAAG,CAAC,WAAW,CAAC,CAAA;AAEhB,EAAA,MAAM,KAAA,GAAQ,WAAA,CAAY,CAAC,MAAA,KAAyB;AAChD,IAAA,IAAI,CAAC,YAAY,OAAA,EAAS;AAC1B,IAAA,eAAA,CAAgB,WAAA,CAAY,OAAA,EAAS,MAAA,EAAQ,QAAQ,CAAA;AAAA,EACzD,CAAA,EAAG,CAAC,WAAA,EAAa,QAAQ,CAAC,CAAA;AAE1B,EAAA,OAAO,KAAA,CAAM,QAAQ,OAAO;AAAA,IACxB,MAAM,MAAM,KAAA,CAAM,WAAW,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IACnD,QAAQ,MAAM,KAAA,CAAM,aAAa,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IACvD,WAAW,MAAM,KAAA,CAAM,gBAAgB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IAC7D,eAAe,MAAM,KAAA,CAAM,oBAAoB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IACrE,IAAA,EAAM,CAAC,GAAA,KAAiB,KAAA,CAAM,WAAW,KAAA,EAAO,YAAA,EAAa,EAAG,GAAG,CAAC,CAAA;AAAA,IACpE,KAAA,EAAO,CAAC,GAAA,EAAa,GAAA,KAAiB,KAAA,CAAM,WAAA,CAAY,KAAA,EAAO,YAAA,EAAa,EAAG,GAAA,EAAK,GAAG,CAAC,CAAA;AAAA,IACxF,SAAA,EAAW,CAAC,IAAA,KAAkB,KAAA,CAAM,gBAAgB,KAAA,EAAO,YAAA,EAAa,EAAG,IAAI,CAAC,CAAA;AAAA,IAChF,YAAY,MAAM,KAAA,CAAM,iBAAiB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IAC/D,YAAY,MAAM,KAAA,CAAM,iBAAiB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IAC/D,cAAc,MAAM,KAAA,CAAM,mBAAmB,KAAA,EAAO,YAAA,EAAc,CAAC,CAAA;AAAA,IACnE,MAAA,EAAQ,CAAC,KAAA,KAAiC,KAAA,CAAM,aAAa,KAAA,EAAO,YAAA,EAAa,EAAG,KAAK,CAAC,CAAA;AAAA,IAC1F,KAAA,EAAO,CAAC,IAAA,EAAe,IAAA,KAAkB,KAAA,CAAM,WAAA,CAAY,KAAA,EAAO,YAAA,EAAa,EAAG,IAAA,EAAM,IAAI,CAAC,CAAA;AAAA,IAC7F,OAAA,EAAS,CAAC,KAAA,KAAmB,KAAA,CAAM,cAAc,KAAA,EAAO,YAAA,EAAa,EAAG,KAAK,CAAC,CAAA;AAAA,IAC9E,KAAA,EAAO,CAAC,KAAA,KAAkB,KAAA,CAAM,YAAY,KAAA,EAAO,YAAA,EAAa,EAAG,KAAK,CAAC,CAAA;AAAA,IACzE,GAAA,EAAK,CAAC,GAAA,KAAgB,KAAA,CAAM,UAAU,KAAA,EAAO,YAAA,EAAa,EAAG,GAAG,CAAC;AAAA,GACrE,CAAA,EAAI,CAAC,KAAA,EAAO,YAAA,EAAc,KAAK,CAAC,CAAA;AACpC","file":"react.mjs","sourcesContent":["/**\n * @snapie/composer/react\n * \n * Pre-built React components for Hive markdown editing.\n * Built with Chakra UI for styling.\n * \n * @example\n * ```tsx\n * import { MarkdownEditor } from '@snapie/composer/react';\n * \n * function MyEditor() {\n *   const [content, setContent] = useState('');\n *   \n *   return (\n *     <MarkdownEditor\n *       value={content}\n *       onChange={setContent}\n *       onImageUpload={async (file) => {\n *         // Upload to Hive/IPFS and return URL\n *         return 'https://...';\n *       }}\n *     />\n *   );\n * }\n * ```\n */\n\n'use client';\n\nimport React, { useRef, useCallback, useEffect } from 'react';\nimport {\n    insertBold,\n    insertItalic,\n    insertUnderline,\n    insertStrikethrough,\n    insertLink,\n    insertImage,\n    insertCodeBlock,\n    insertBlockquote,\n    insertBulletList,\n    insertNumberedList,\n    insertHeader,\n    insertTable,\n    insertSpoiler,\n    insertEmoji,\n    insertGif,\n    getSelectionFromTextarea,\n    applyToTextarea,\n    createKeyboardHandler,\n    type TextSelection,\n    type InsertResult,\n} from '../index';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface EditorToolbarProps {\n    /** Reference to the textarea element */\n    textareaRef: React.RefObject<HTMLTextAreaElement>;\n    /** Current markdown value */\n    value: string;\n    /** Callback when value changes */\n    onChange: (value: string) => void;\n    /** Optional image upload handler */\n    onImageUpload?: (file: File) => Promise<string>;\n    /** Optional GIF selection handler (e.g., open Giphy modal) */\n    onGifClick?: () => void;\n    /** Whether the toolbar is disabled */\n    disabled?: boolean;\n    /** Additional class name */\n    className?: string;\n}\n\nexport interface MarkdownEditorProps {\n    /** Current markdown value */\n    value: string;\n    /** Callback when value changes */\n    onChange: (value: string) => void;\n    /** Placeholder text */\n    placeholder?: string;\n    /** Optional image upload handler */\n    onImageUpload?: (file: File) => Promise<string>;\n    /** Optional GIF selection handler */\n    onGifClick?: () => void;\n    /** Whether the editor is disabled */\n    disabled?: boolean;\n    /** Minimum height */\n    minHeight?: string;\n    /** Additional class name */\n    className?: string;\n    /** Show toolbar */\n    showToolbar?: boolean;\n    /** Render function for preview (use @snapie/renderer) */\n    renderPreview?: (markdown: string) => React.ReactNode;\n}\n\nexport interface UseMarkdownEditorOptions {\n    /** Initial value */\n    initialValue?: string;\n    /** Callback when value changes */\n    onChange?: (value: string) => void;\n}\n\n// ============================================================================\n// Hook: useMarkdownEditor\n// ============================================================================\n\n/**\n * Hook for managing markdown editor state and operations\n * \n * @example\n * ```tsx\n * const { value, onChange, textareaRef, toolbar } = useMarkdownEditor({\n *   initialValue: '',\n *   onChange: (v) => console.log('Changed:', v)\n * });\n * \n * // Use toolbar.bold(), toolbar.italic(), etc.\n * ```\n */\nexport function useMarkdownEditor(options: UseMarkdownEditorOptions = {}) {\n    const [value, setValue] = React.useState(options.initialValue ?? '');\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n    \n    const handleChange = useCallback((newValue: string) => {\n        setValue(newValue);\n        options.onChange?.(newValue);\n    }, [options.onChange]);\n    \n    const getSelection = useCallback((): TextSelection => {\n        if (!textareaRef.current) return { start: 0, end: 0 };\n        return getSelectionFromTextarea(textareaRef.current);\n    }, []);\n    \n    const apply = useCallback((result: InsertResult) => {\n        if (!textareaRef.current) return;\n        applyToTextarea(textareaRef.current, result, handleChange);\n    }, [handleChange]);\n    \n    // Create toolbar action functions\n    const toolbar = React.useMemo(() => ({\n        bold: () => apply(insertBold(value, getSelection())),\n        italic: () => apply(insertItalic(value, getSelection())),\n        underline: () => apply(insertUnderline(value, getSelection())),\n        strikethrough: () => apply(insertStrikethrough(value, getSelection())),\n        link: (url?: string) => apply(insertLink(value, getSelection(), url)),\n        image: (url: string, alt?: string) => apply(insertImage(value, getSelection(), url, alt)),\n        codeBlock: (lang?: string) => apply(insertCodeBlock(value, getSelection(), lang)),\n        blockquote: () => apply(insertBlockquote(value, getSelection())),\n        bulletList: () => apply(insertBulletList(value, getSelection())),\n        numberedList: () => apply(insertNumberedList(value, getSelection())),\n        header: (level: 1 | 2 | 3 | 4 | 5 | 6) => apply(insertHeader(value, getSelection(), level)),\n        table: (cols?: number, rows?: number) => apply(insertTable(value, getSelection(), cols, rows)),\n        spoiler: (title?: string) => apply(insertSpoiler(value, getSelection(), title)),\n        emoji: (emoji: string) => apply(insertEmoji(value, getSelection(), emoji)),\n        gif: (url: string) => apply(insertGif(value, getSelection(), url)),\n    }), [value, getSelection, apply]);\n    \n    // Keyboard shortcuts\n    useEffect(() => {\n        const handler = createKeyboardHandler(\n            () => value,\n            getSelection,\n            apply\n        );\n        \n        const textarea = textareaRef.current;\n        if (textarea) {\n            textarea.addEventListener('keydown', handler as EventListener);\n            return () => textarea.removeEventListener('keydown', handler as EventListener);\n        }\n    }, [value, getSelection, apply]);\n    \n    return {\n        value,\n        onChange: handleChange,\n        textareaRef,\n        toolbar,\n        getSelection,\n    };\n}\n\n// ============================================================================\n// Component: EditorToolbar (Headless - bring your own UI)\n// ============================================================================\n\n/**\n * Headless toolbar hook - returns actions without any UI\n * Use this if you want to build your own toolbar UI\n */\nexport function useEditorToolbar(\n    textareaRef: React.RefObject<HTMLTextAreaElement>,\n    value: string,\n    onChange: (value: string) => void\n) {\n    const getSelection = useCallback((): TextSelection => {\n        if (!textareaRef.current) return { start: 0, end: 0 };\n        return getSelectionFromTextarea(textareaRef.current);\n    }, [textareaRef]);\n    \n    const apply = useCallback((result: InsertResult) => {\n        if (!textareaRef.current) return;\n        applyToTextarea(textareaRef.current, result, onChange);\n    }, [textareaRef, onChange]);\n    \n    return React.useMemo(() => ({\n        bold: () => apply(insertBold(value, getSelection())),\n        italic: () => apply(insertItalic(value, getSelection())),\n        underline: () => apply(insertUnderline(value, getSelection())),\n        strikethrough: () => apply(insertStrikethrough(value, getSelection())),\n        link: (url?: string) => apply(insertLink(value, getSelection(), url)),\n        image: (url: string, alt?: string) => apply(insertImage(value, getSelection(), url, alt)),\n        codeBlock: (lang?: string) => apply(insertCodeBlock(value, getSelection(), lang)),\n        blockquote: () => apply(insertBlockquote(value, getSelection())),\n        bulletList: () => apply(insertBulletList(value, getSelection())),\n        numberedList: () => apply(insertNumberedList(value, getSelection())),\n        header: (level: 1 | 2 | 3 | 4 | 5 | 6) => apply(insertHeader(value, getSelection(), level)),\n        table: (cols?: number, rows?: number) => apply(insertTable(value, getSelection(), cols, rows)),\n        spoiler: (title?: string) => apply(insertSpoiler(value, getSelection(), title)),\n        emoji: (emoji: string) => apply(insertEmoji(value, getSelection(), emoji)),\n        gif: (url: string) => apply(insertGif(value, getSelection(), url)),\n    }), [value, getSelection, apply]);\n}\n\n// ============================================================================\n// Re-export core utilities\n// ============================================================================\n\nexport {\n    // Core functions\n    insertBold,\n    insertItalic,\n    insertUnderline,\n    insertStrikethrough,\n    insertLink,\n    insertImage,\n    insertCodeBlock,\n    insertBlockquote,\n    insertBulletList,\n    insertNumberedList,\n    insertHeader,\n    insertH1,\n    insertH2,\n    insertH3,\n    insertH4,\n    insertH5,\n    insertH6,\n    insertTable,\n    insertSpoiler,\n    insertHorizontalRule,\n    insertEmoji,\n    insertMention,\n    insertGif,\n    // Utilities\n    getSelectionFromTextarea,\n    applyToTextarea,\n    createKeyboardHandler,\n    // Constants\n    COMMON_EMOJIS,\n    ALL_COMMON_EMOJIS,\n} from '../index';\n\nexport type { TextSelection, InsertResult } from '../index';\n"]}