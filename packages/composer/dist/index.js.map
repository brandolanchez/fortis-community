{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @snapie/composer\n * \n * Rich markdown editor utilities for Hive blockchain content creation.\n * \n * This package provides two layers:\n * \n * ## Core Utilities (Framework-Agnostic)\n * \n * Pure functions for markdown manipulation that work anywhere:\n * \n * ```typescript\n * import { insertBold, insertImage, insertLink } from '@snapie/composer';\n * \n * // These return { text, cursorPosition } - you handle the UI\n * const result = insertBold('Hello world', { start: 0, end: 5 });\n * // result.text = '**Hello** world'\n * // result.cursorPosition = 9\n * ```\n * \n * ## React Components (Optional)\n * \n * Pre-built React components with Chakra UI:\n * \n * ```typescript\n * import { MarkdownEditor, EditorToolbar } from '@snapie/composer/react';\n * \n * <MarkdownEditor\n *   value={markdown}\n *   onChange={setMarkdown}\n *   onImageUpload={uploadToHive}\n * />\n * ```\n * \n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/**\n * Selection range in text\n */\nexport interface TextSelection {\n    /** Start position (0-indexed) */\n    start: number;\n    /** End position (0-indexed) */\n    end: number;\n}\n\n/**\n * Result of a markdown insertion operation\n */\nexport interface InsertResult {\n    /** The modified text */\n    text: string;\n    /** Where to place the cursor after insertion */\n    cursorPosition: number;\n    /** Optional selection range (for selecting inserted text) */\n    selection?: TextSelection;\n}\n\n/**\n * Common emoji categories for quick access\n */\nexport const COMMON_EMOJIS = {\n    reactions: ['üòä', 'üòÇ', '‚ù§Ô∏è', 'üëç', 'üëé', 'üî•', 'üíØ', 'üéâ', 'üòç', 'ü§î'],\n    expressions: ['üò¢', 'üòé', 'üôÑ', 'üò¥', 'ü§ó', 'ü§©', 'üò¨', 'üò±', 'ü§Ø', 'üòá'],\n    symbols: ['üöÄ', '‚≠ê', 'üí™', 'üëè', 'üôå', 'ü§ù', 'üí∞', 'üìà', 'üìâ', 'üíé'],\n} as const;\n\n/**\n * Flattened list of all common emojis\n */\nexport const ALL_COMMON_EMOJIS = [\n    ...COMMON_EMOJIS.reactions,\n    ...COMMON_EMOJIS.expressions,\n    ...COMMON_EMOJIS.symbols,\n];\n\n// ============================================================================\n// Text Formatting\n// ============================================================================\n\n/**\n * Wrap selected text with bold markers\n * \n * @example\n * ```typescript\n * const result = insertBold('Hello world', { start: 0, end: 5 });\n * // result.text = '**Hello** world'\n * ```\n */\nexport function insertBold(text: string, selection: TextSelection): InsertResult {\n    return wrapSelection(text, selection, '**', '**');\n}\n\n/**\n * Wrap selected text with italic markers\n */\nexport function insertItalic(text: string, selection: TextSelection): InsertResult {\n    return wrapSelection(text, selection, '*', '*');\n}\n\n/**\n * Wrap selected text with underline HTML tags\n */\nexport function insertUnderline(text: string, selection: TextSelection): InsertResult {\n    return wrapSelection(text, selection, '<u>', '</u>');\n}\n\n/**\n * Wrap selected text with strikethrough markers\n */\nexport function insertStrikethrough(text: string, selection: TextSelection): InsertResult {\n    return wrapSelection(text, selection, '~~', '~~');\n}\n\n/**\n * Wrap selected text with inline code markers\n */\nexport function insertInlineCode(text: string, selection: TextSelection): InsertResult {\n    return wrapSelection(text, selection, '`', '`');\n}\n\n// ============================================================================\n// Block Elements\n// ============================================================================\n\n/**\n * Insert a link at cursor/selection\n * If text is selected, it becomes the link text\n */\nexport function insertLink(\n    text: string, \n    selection: TextSelection, \n    url: string = 'url'\n): InsertResult {\n    const selectedText = text.substring(selection.start, selection.end) || 'link text';\n    const linkMarkdown = `[${selectedText}](${url})`;\n    \n    const newText = text.substring(0, selection.start) + linkMarkdown + text.substring(selection.end);\n    \n    // Position cursor at the URL part for easy editing\n    const urlStart = selection.start + selectedText.length + 3; // [text](\n    const urlEnd = urlStart + url.length;\n    \n    return {\n        text: newText,\n        cursorPosition: urlEnd + 1, // After the closing )\n        selection: { start: urlStart, end: urlEnd }\n    };\n}\n\n/**\n * Insert an image at cursor\n */\nexport function insertImage(\n    text: string, \n    selection: TextSelection, \n    url: string,\n    altText: string = 'image'\n): InsertResult {\n    const imageMarkdown = `![${altText}](${url})`;\n    const newText = text.substring(0, selection.start) + imageMarkdown + text.substring(selection.end);\n    \n    return {\n        text: newText,\n        cursorPosition: selection.start + imageMarkdown.length,\n    };\n}\n\n/**\n * Insert a code block\n */\nexport function insertCodeBlock(\n    text: string, \n    selection: TextSelection, \n    language: string = ''\n): InsertResult {\n    const selectedText = text.substring(selection.start, selection.end) || 'code here';\n    const codeBlock = `\\`\\`\\`${language}\\n${selectedText}\\n\\`\\`\\``;\n    \n    const newText = text.substring(0, selection.start) + codeBlock + text.substring(selection.end);\n    \n    // Position cursor inside the code block\n    const codeStart = selection.start + 3 + language.length + 1; // ```lang\\n\n    \n    return {\n        text: newText,\n        cursorPosition: codeStart + selectedText.length,\n        selection: { start: codeStart, end: codeStart + selectedText.length }\n    };\n}\n\n/**\n * Insert a blockquote\n */\nexport function insertBlockquote(text: string, selection: TextSelection): InsertResult {\n    return insertAtLineStart(text, selection, '> ');\n}\n\n/**\n * Insert a bullet list item\n */\nexport function insertBulletList(text: string, selection: TextSelection): InsertResult {\n    return insertAtLineStart(text, selection, '- ');\n}\n\n/**\n * Insert a numbered list item\n */\nexport function insertNumberedList(text: string, selection: TextSelection): InsertResult {\n    return insertAtLineStart(text, selection, '1. ');\n}\n\n// ============================================================================\n// Headers\n// ============================================================================\n\n/**\n * Insert a header at the specified level (1-6)\n */\nexport function insertHeader(\n    text: string, \n    selection: TextSelection, \n    level: 1 | 2 | 3 | 4 | 5 | 6\n): InsertResult {\n    const prefix = '#'.repeat(level) + ' ';\n    return insertAtLineStart(text, selection, prefix);\n}\n\n/**\n * Convenience functions for specific header levels\n */\nexport const insertH1 = (text: string, sel: TextSelection) => insertHeader(text, sel, 1);\nexport const insertH2 = (text: string, sel: TextSelection) => insertHeader(text, sel, 2);\nexport const insertH3 = (text: string, sel: TextSelection) => insertHeader(text, sel, 3);\nexport const insertH4 = (text: string, sel: TextSelection) => insertHeader(text, sel, 4);\nexport const insertH5 = (text: string, sel: TextSelection) => insertHeader(text, sel, 5);\nexport const insertH6 = (text: string, sel: TextSelection) => insertHeader(text, sel, 6);\n\n// ============================================================================\n// Special Elements\n// ============================================================================\n\n/**\n * Insert a markdown table\n */\nexport function insertTable(\n    text: string, \n    selection: TextSelection,\n    columns: number = 2,\n    rows: number = 2\n): InsertResult {\n    const headers = Array(columns).fill('Header').map((h, i) => `${h} ${i + 1}`).join(' | ');\n    const separator = Array(columns).fill('---').join(' | ');\n    const dataRows = Array(rows).fill(null)\n        .map(() => Array(columns).fill('Cell').map((c, i) => `${c} ${i + 1}`).join(' | '))\n        .join('\\n');\n    \n    const table = `| ${headers} |\\n| ${separator} |\\n| ${dataRows.replace(/\\n/g, ' |\\n| ')} |`;\n    \n    const newText = text.substring(0, selection.start) + table + text.substring(selection.end);\n    \n    return {\n        text: newText,\n        cursorPosition: selection.start + table.length,\n    };\n}\n\n/**\n * Insert a spoiler block (Hive-specific syntax)\n */\nexport function insertSpoiler(\n    text: string, \n    selection: TextSelection,\n    title: string = 'Spoiler'\n): InsertResult {\n    const selectedText = text.substring(selection.start, selection.end) || 'Hidden content here';\n    const spoiler = `>! [${title}] ${selectedText}`;\n    \n    const newText = text.substring(0, selection.start) + spoiler + text.substring(selection.end);\n    \n    return {\n        text: newText,\n        cursorPosition: selection.start + spoiler.length,\n    };\n}\n\n/**\n * Insert a horizontal rule\n */\nexport function insertHorizontalRule(text: string, selection: TextSelection): InsertResult {\n    const hr = '\\n\\n---\\n\\n';\n    const newText = text.substring(0, selection.start) + hr + text.substring(selection.end);\n    \n    return {\n        text: newText,\n        cursorPosition: selection.start + hr.length,\n    };\n}\n\n/**\n * Insert an emoji\n */\nexport function insertEmoji(text: string, selection: TextSelection, emoji: string): InsertResult {\n    const newText = text.substring(0, selection.start) + emoji + text.substring(selection.end);\n    \n    return {\n        text: newText,\n        cursorPosition: selection.start + emoji.length,\n    };\n}\n\n/**\n * Insert a Hive user mention\n */\nexport function insertMention(\n    text: string, \n    selection: TextSelection, \n    username: string\n): InsertResult {\n    const mention = `@${username} `;\n    const newText = text.substring(0, selection.start) + mention + text.substring(selection.end);\n    \n    return {\n        text: newText,\n        cursorPosition: selection.start + mention.length,\n    };\n}\n\n/**\n * Insert a GIF from Giphy\n */\nexport function insertGif(\n    text: string, \n    selection: TextSelection, \n    gifUrl: string\n): InsertResult {\n    // Use the downsized GIF URL directly as an image\n    const gifMarkdown = `\\n![gif](${gifUrl})\\n`;\n    const newText = text.substring(0, selection.start) + gifMarkdown + text.substring(selection.end);\n    \n    return {\n        text: newText,\n        cursorPosition: selection.start + gifMarkdown.length,\n    };\n}\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\n/**\n * Wrap selected text with prefix and suffix\n */\nfunction wrapSelection(\n    text: string, \n    selection: TextSelection, \n    prefix: string, \n    suffix: string\n): InsertResult {\n    const before = text.substring(0, selection.start);\n    const selected = text.substring(selection.start, selection.end);\n    const after = text.substring(selection.end);\n    \n    const newText = before + prefix + selected + suffix + after;\n    \n    // Position cursor after the wrapped text\n    const cursorPos = selection.start + prefix.length + selected.length + suffix.length;\n    \n    return {\n        text: newText,\n        cursorPosition: cursorPos,\n        selection: {\n            start: selection.start + prefix.length,\n            end: selection.start + prefix.length + selected.length\n        }\n    };\n}\n\n/**\n * Insert text at the start of the current line\n */\nfunction insertAtLineStart(\n    text: string, \n    selection: TextSelection, \n    prefix: string\n): InsertResult {\n    // Find the start of the current line\n    let lineStart = selection.start;\n    while (lineStart > 0 && text[lineStart - 1] !== '\\n') {\n        lineStart--;\n    }\n    \n    // Check if we need a newline before\n    const needsNewline = lineStart > 0 && text[lineStart - 1] !== '\\n';\n    const actualPrefix = needsNewline ? '\\n' + prefix : prefix;\n    \n    const newText = text.substring(0, lineStart) + actualPrefix + text.substring(lineStart);\n    \n    return {\n        text: newText,\n        cursorPosition: selection.start + actualPrefix.length,\n    };\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\n/**\n * Get the current selection from a textarea element\n */\nexport function getSelectionFromTextarea(textarea: HTMLTextAreaElement): TextSelection {\n    return {\n        start: textarea.selectionStart,\n        end: textarea.selectionEnd\n    };\n}\n\n/**\n * Apply an insert result to a textarea and restore cursor position\n */\nexport function applyToTextarea(\n    textarea: HTMLTextAreaElement,\n    result: InsertResult,\n    onChange?: (value: string) => void\n): void {\n    // Update the value\n    textarea.value = result.text;\n    \n    // Trigger onChange if provided\n    if (onChange) {\n        onChange(result.text);\n    }\n    \n    // Restore focus and cursor position\n    textarea.focus();\n    \n    if (result.selection) {\n        textarea.setSelectionRange(result.selection.start, result.selection.end);\n    } else {\n        textarea.setSelectionRange(result.cursorPosition, result.cursorPosition);\n    }\n}\n\n/**\n * Create a keyboard shortcut handler for common markdown operations\n */\nexport function createKeyboardHandler(\n    getText: () => string,\n    getSelection: () => TextSelection,\n    applyResult: (result: InsertResult) => void\n) {\n    return (event: KeyboardEvent) => {\n        const isMod = event.metaKey || event.ctrlKey;\n        \n        if (!isMod) return;\n        \n        const text = getText();\n        const selection = getSelection();\n        let result: InsertResult | null = null;\n        \n        switch (event.key.toLowerCase()) {\n            case 'b':\n                event.preventDefault();\n                result = insertBold(text, selection);\n                break;\n            case 'i':\n                event.preventDefault();\n                result = insertItalic(text, selection);\n                break;\n            case 'u':\n                event.preventDefault();\n                result = insertUnderline(text, selection);\n                break;\n            case 'k':\n                event.preventDefault();\n                result = insertLink(text, selection);\n                break;\n            case '`':\n                event.preventDefault();\n                result = insertInlineCode(text, selection);\n                break;\n        }\n        \n        if (result) {\n            applyResult(result);\n        }\n    };\n}\n"]}